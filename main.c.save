#include <stdio.h>
#include <locale.h>

#include "jogo.h"

int menuPrincipal();
void menu_principal(void);
void roda();

int main() {
    setlocale(LC_ALL, "Portuguese");

    menu_principal();
}


int menuPrincipal(){

    int opcao;

    mudar_cor(1);
    printf("\n\n               JOGO DOS SOLDADOS");
    printf("\n-------------------------------------------------");
    mudar_cor(11);
    printf("\n\n\t1. Defina a quantidade de soldados.");
    printf("\n\t2. Defina o intervalo de contagem.");
    printf("\n\t3. Defina sua posição na fila.");
    printf("\n\t4. Roda o jogo.");
    printf("\n\t5. vazio.");
    printf("\n\t6. vazio.");
    printf("\n\t7. vazio.");
    printf("\n\t0. Sair do programa.");
    mudar_cor(3);
    printf("\n\nEntre com a opção desejada: ");
    scanf("%d", &opcao);
    return opcao;
}

void menu_principal(void) {
    system("cls");

    int qtd_soldados;
    int passos_remover ;
    int item_escolhido;

    int opcao_menu = -1;
    while (opcao_menu != 0) {
        opcao_menu = menuPrincipal();
        switch(opcao_menu) {
            case 1:
                printf("Quantos soldados? ");
                scanf("%d\n", &qtd_soldados);
                break;
            case 2:
                printf("\nQual a intervalo? ");
                scanf("%d\n", &passos_remover);
                break;
            case 3:
                printf("\nQual a sua posição na fila? ");
                scanf("%d\n", &item_escolhido);
                break;
            case 4:
                roda();
                break;
            case 5:
                system("cls");
                break;
            case 6:
                system("cls");
                break;
            case 7:
                system("cls");
                break;
            case 0:
                printf("\n\n\nSaindo...\n\n");
                exit(0);
                break;
            default:
                system("cls");
                imprime_erro("ESCOLHA INVÁLIDA TENTE NOVAMENTE.");
                aperte_enter();
                break;
        }
    }
}

void roda(){
    while(node != node->next) {
        for (int i = 0; i < passos_remover;i++){
            node = node->next;
        }
        node = remove_node(node);
        printf("Soldado atual: %d\n", node->item);
        imprime_roda(node);
    }
    if(node->item == item_escolhido) {
        printf("Ganhou yupiii\n");
    } else {
        printf("Boa sorte na proxima\n");
    }
}
